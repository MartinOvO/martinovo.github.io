import{_ as s,c as n,o as a,Q as p}from"./chunks/framework.1fc80e1c.js";const g=JSON.parse('{"title":"第一个 Django 应用程序 - 1","description":"","frontmatter":{},"headers":[],"relativePath":"apython/bdjangoa.md","filePath":"apython/bdjangoa.md"}'),l={name:"apython/bdjangoa.md"},o=p(`<h1 id="第一个-django-应用程序-1" tabindex="-1">第一个 Django 应用程序 - 1 <a class="header-anchor" href="#第一个-django-应用程序-1" aria-label="Permalink to &quot;第一个 Django 应用程序 - 1&quot;">​</a></h1><h2 id="文件结构" tabindex="-1">文件结构 <a class="header-anchor" href="#文件结构" aria-label="Permalink to &quot;文件结构&quot;">​</a></h2><p>使用 poetry 管理的 Django 项目文件结构如下:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">./ </span><span style="color:#6A737D;">// 项目根目录此处为 PySiteServer</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ siteserver </span><span style="color:#6A737D;">// Django 项目外部根目录是项目的容器</span></span>
<span class="line"><span style="color:#E1E4E8;">│  ├─ manage.py </span><span style="color:#6A737D;">// 命令行实用程序，可以在终端中与 Django 交互</span></span>
<span class="line"><span style="color:#E1E4E8;">│  └─ siteserver </span><span style="color:#6A737D;">// 实际的 python 项目</span></span>
<span class="line"><span style="color:#E1E4E8;">│     ├─ __init__.py </span><span style="color:#6A737D;">// 一个空文件，向python声明此目录为python包</span></span>
<span class="line"><span style="color:#E1E4E8;">│     ├─ setting.py </span><span style="color:#6A737D;">// Django 配置文件</span></span>
<span class="line"><span style="color:#E1E4E8;">│     ├─ urls.py </span><span style="color:#6A737D;">// Django 路由文件</span></span>
<span class="line"><span style="color:#E1E4E8;">│     ├─ asgi.py </span><span style="color:#6A737D;">// asgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#E1E4E8;">│     └─ wsgi.py </span><span style="color:#6A737D;">// wsgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ .venv </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ poetry.lock </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ pyproject.toml </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#E1E4E8;">└─ requirements.txt </span><span style="color:#6A737D;">// 部署模块文件</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">./ </span><span style="color:#6A737D;">// 项目根目录此处为 PySiteServer</span></span>
<span class="line"><span style="color:#24292E;">├─ siteserver </span><span style="color:#6A737D;">// Django 项目外部根目录是项目的容器</span></span>
<span class="line"><span style="color:#24292E;">│  ├─ manage.py </span><span style="color:#6A737D;">// 命令行实用程序，可以在终端中与 Django 交互</span></span>
<span class="line"><span style="color:#24292E;">│  └─ siteserver </span><span style="color:#6A737D;">// 实际的 python 项目</span></span>
<span class="line"><span style="color:#24292E;">│     ├─ __init__.py </span><span style="color:#6A737D;">// 一个空文件，向python声明此目录为python包</span></span>
<span class="line"><span style="color:#24292E;">│     ├─ setting.py </span><span style="color:#6A737D;">// Django 配置文件</span></span>
<span class="line"><span style="color:#24292E;">│     ├─ urls.py </span><span style="color:#6A737D;">// Django 路由文件</span></span>
<span class="line"><span style="color:#24292E;">│     ├─ asgi.py </span><span style="color:#6A737D;">// asgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#24292E;">│     └─ wsgi.py </span><span style="color:#6A737D;">// wsgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#24292E;">├─ .venv </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#24292E;">├─ poetry.lock </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#24292E;">├─ pyproject.toml </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#24292E;">└─ requirements.txt </span><span style="color:#6A737D;">// 部署模块文件</span></span></code></pre></div><p>整理一下项目:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">./ </span><span style="color:#6A737D;">// 项目根目录此处为 PySiteServer</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ manage.py </span><span style="color:#6A737D;">// 命令行实用程序，可以在终端中与 Django 交互</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ siteserver </span><span style="color:#6A737D;">// 实际的 python 项目</span></span>
<span class="line"><span style="color:#E1E4E8;">│  ├─ __init__.py </span><span style="color:#6A737D;">// 一个空文件，向python声明此目录为python包</span></span>
<span class="line"><span style="color:#E1E4E8;">│  ├─ setting.py </span><span style="color:#6A737D;">// Django 配置文件</span></span>
<span class="line"><span style="color:#E1E4E8;">│  ├─ urls.py </span><span style="color:#6A737D;">// Django 路由文件</span></span>
<span class="line"><span style="color:#E1E4E8;">│  ├─ asgi.py </span><span style="color:#6A737D;">// asgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#E1E4E8;">│  └─ wsgi.py </span><span style="color:#6A737D;">// wsgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ .venv </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ poetry.lock </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#E1E4E8;">├─ pyproject.toml </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#E1E4E8;">└─ requirements.txt </span><span style="color:#6A737D;">// 部署模块文件</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">./ </span><span style="color:#6A737D;">// 项目根目录此处为 PySiteServer</span></span>
<span class="line"><span style="color:#24292E;">├─ manage.py </span><span style="color:#6A737D;">// 命令行实用程序，可以在终端中与 Django 交互</span></span>
<span class="line"><span style="color:#24292E;">├─ siteserver </span><span style="color:#6A737D;">// 实际的 python 项目</span></span>
<span class="line"><span style="color:#24292E;">│  ├─ __init__.py </span><span style="color:#6A737D;">// 一个空文件，向python声明此目录为python包</span></span>
<span class="line"><span style="color:#24292E;">│  ├─ setting.py </span><span style="color:#6A737D;">// Django 配置文件</span></span>
<span class="line"><span style="color:#24292E;">│  ├─ urls.py </span><span style="color:#6A737D;">// Django 路由文件</span></span>
<span class="line"><span style="color:#24292E;">│  ├─ asgi.py </span><span style="color:#6A737D;">// asgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#24292E;">│  └─ wsgi.py </span><span style="color:#6A737D;">// wsgi兼容web服务，部署使用</span></span>
<span class="line"><span style="color:#24292E;">├─ .venv </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#24292E;">├─ poetry.lock </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#24292E;">├─ pyproject.toml </span><span style="color:#6A737D;">// poetry 模块</span></span>
<span class="line"><span style="color:#24292E;">└─ requirements.txt </span><span style="color:#6A737D;">// 部署模块文件</span></span></code></pre></div><h2 id="运行项目" tabindex="-1">运行项目 <a class="header-anchor" href="#运行项目" aria-label="Permalink to &quot;运行项目&quot;">​</a></h2><p>使用 PyCharm 打开项目会自动加载此项目的虚拟环境。</p><p>运行开发服务器 使用 PyCharm 内置终端输入:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">python</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">manage.py</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">runserver</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">python</span><span style="color:#24292E;"> </span><span style="color:#032F62;">manage.py</span><span style="color:#24292E;"> </span><span style="color:#032F62;">runserver</span></span></code></pre></div><p>此时终端将会看到以下输出:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">Watching</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">file</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">changes</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">StatReloader</span></span>
<span class="line"><span style="color:#B392F0;">Performing</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">system</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">checks...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">System</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">check</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">identified</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">no</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">issues</span><span style="color:#E1E4E8;"> (0 </span><span style="color:#9ECBFF;">silenced</span><span style="color:#E1E4E8;">).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">You</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">have</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">unapplied</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">migration</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">Your</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">project</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">may</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">not</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">work</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">properly</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">until</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">you</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apply</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">migrations</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">for</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">app</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">s</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">admin,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">auth,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">contenttypes,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">sessions.</span></span>
<span class="line"><span style="color:#B392F0;">Run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;python manage.py migrate&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apply</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">them.</span></span>
<span class="line"><span style="color:#B392F0;">September</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">29</span><span style="color:#9ECBFF;">,</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2023</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">07</span><span style="color:#9ECBFF;">:10:14</span></span>
<span class="line"><span style="color:#B392F0;">Django</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">version</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">4.2</span><span style="color:#9ECBFF;">.5,</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">using</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">settings</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;siteserver.settings&#39;</span></span>
<span class="line"><span style="color:#B392F0;">Starting</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">development</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">at</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">http://127.0.0.1:8000/</span></span>
<span class="line"><span style="color:#B392F0;">Quit</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">the</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">with</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">CONTROL-C.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">Watching</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">file</span><span style="color:#24292E;"> </span><span style="color:#032F62;">changes</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">StatReloader</span></span>
<span class="line"><span style="color:#6F42C1;">Performing</span><span style="color:#24292E;"> </span><span style="color:#032F62;">system</span><span style="color:#24292E;"> </span><span style="color:#032F62;">checks...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">System</span><span style="color:#24292E;"> </span><span style="color:#032F62;">check</span><span style="color:#24292E;"> </span><span style="color:#032F62;">identified</span><span style="color:#24292E;"> </span><span style="color:#032F62;">no</span><span style="color:#24292E;"> </span><span style="color:#032F62;">issues</span><span style="color:#24292E;"> (0 </span><span style="color:#032F62;">silenced</span><span style="color:#24292E;">).</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">You</span><span style="color:#24292E;"> </span><span style="color:#032F62;">have</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">18</span><span style="color:#24292E;"> </span><span style="color:#032F62;">unapplied</span><span style="color:#24292E;"> </span><span style="color:#032F62;">migration</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">s</span><span style="color:#24292E;">)</span><span style="color:#032F62;">.</span><span style="color:#24292E;"> </span><span style="color:#032F62;">Your</span><span style="color:#24292E;"> </span><span style="color:#032F62;">project</span><span style="color:#24292E;"> </span><span style="color:#032F62;">may</span><span style="color:#24292E;"> </span><span style="color:#032F62;">not</span><span style="color:#24292E;"> </span><span style="color:#032F62;">work</span><span style="color:#24292E;"> </span><span style="color:#032F62;">properly</span><span style="color:#24292E;"> </span><span style="color:#032F62;">until</span><span style="color:#24292E;"> </span><span style="color:#032F62;">you</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apply</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">migrations</span><span style="color:#24292E;"> </span><span style="color:#032F62;">for</span><span style="color:#24292E;"> </span><span style="color:#032F62;">app</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">s</span><span style="color:#24292E;">)</span><span style="color:#032F62;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">admin,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">auth,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">contenttypes,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">sessions.</span></span>
<span class="line"><span style="color:#6F42C1;">Run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;python manage.py migrate&#39;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apply</span><span style="color:#24292E;"> </span><span style="color:#032F62;">them.</span></span>
<span class="line"><span style="color:#6F42C1;">September</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">29</span><span style="color:#032F62;">,</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2023</span><span style="color:#24292E;"> </span><span style="color:#032F62;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">07</span><span style="color:#032F62;">:10:14</span></span>
<span class="line"><span style="color:#6F42C1;">Django</span><span style="color:#24292E;"> </span><span style="color:#032F62;">version</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">4.2</span><span style="color:#032F62;">.5,</span><span style="color:#24292E;"> </span><span style="color:#032F62;">using</span><span style="color:#24292E;"> </span><span style="color:#032F62;">settings</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;siteserver.settings&#39;</span></span>
<span class="line"><span style="color:#6F42C1;">Starting</span><span style="color:#24292E;"> </span><span style="color:#032F62;">development</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">at</span><span style="color:#24292E;"> </span><span style="color:#032F62;">http://127.0.0.1:8000/</span></span>
<span class="line"><span style="color:#6F42C1;">Quit</span><span style="color:#24292E;"> </span><span style="color:#032F62;">the</span><span style="color:#24292E;"> </span><span style="color:#032F62;">server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">with</span><span style="color:#24292E;"> </span><span style="color:#032F62;">CONTROL-C.</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">提示</p><p>暂时忽略关于数据库迁移相关的警告，在以后的相关文档中会有相关的配置说明。</p></div><p>即可在本地的 <code>8000</code> 端口开启服务。</p><div class="info custom-block"><p class="custom-block-title">提示</p><ol><li>不要在生产环境中使用 <code>python manage.py runserver</code> 命令开启服务，此命令仅用于启动开发服务，部署相关的文档会在以后说明。</li><li>默认开发服务在本地的 <code>8000</code> 端口，也可以使用以下命令 <code>python manage.py runserver 8080</code> 修改端口。</li><li>如果在一个有外部 ip 的服务器上进行开发，并且想要通过外部访问开发服务可以使用以下命令 <code>python manage.py runserver 0.0.0.0:8000</code> 。</li></ol></div><p>通过浏览器访问 <code>http://127.0.0.1:8000/</code> 会在页面中看到一个起飞的火箭。</p>`,16),e=[o];function t(c,r,y,E,i,F){return a(),n("div",null,e)}const h=s(l,[["render",t]]);export{g as __pageData,h as default};
